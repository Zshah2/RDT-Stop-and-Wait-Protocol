<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="RDT Stop-and-Wait Protocol - Interactive Web Simulator">
    <meta name="author" content="Zshah2">
    <title>RDT Stop-and-Wait Protocol Simulator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- HEADER SECTION -->
        <div class="header">
            <div class="header-content">
                <h1>RDT Stop-and-Wait Protocol</h1>
                <p class="subtitle">Interactive Reliable Data Transfer Simulator</p>
                <div class="header-info">
                    <span class="info-badge">üåê Web Simulator</span>
                    <span class="info-separator">‚Ä¢</span>
                    <span class="info-badge">üíª Node.js Backend</span>
                    <span class="info-separator">‚Ä¢</span>
                    <span class="info-badge">üîÑ Real-time Visualization</span>
                </div>
            </div>
        </div>

        <!-- MAIN CONTENT -->
        <div class="main-content">
            <!-- LEFT PANEL - CONFIGURATION -->
            <div class="panel control-panel">
                <h2 class="panel-title">Configuration</h2>

                <!-- UDP Header Configuration -->
                <div class="section">
                    <h3 class="section-title">UDP Header</h3>
                    
                    <div class="form-group">
                        <label for="sourcePort">Source Port</label>
                        <input type="number" id="sourcePort" min="1" max="65535" value="5000" class="input-field">
                    </div>

                    <div class="form-group">
                        <label for="destPort">Destination Port</label>
                        <input type="number" id="destPort" min="1" max="65535" value="8080" class="input-field">
                    </div>

                    <div class="form-group">
                        <label for="seqNum">Sequence Number</label>
                        <input type="number" id="seqNum" min="0" max="1" value="0" class="input-field">
                    </div>
                </div>

                <!-- Payload Configuration -->
                <div class="section">
                    <h3 class="section-title">Payload</h3>
                    
                    <div class="form-group">
                        <label for="packetData">Packet Data</label>
                        <textarea id="packetData" class="textarea-field" placeholder="Enter packet payload...">Hello RDT Protocol</textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="packetSize">Size</label>
                            <input type="number" id="packetSize" min="1" value="512" class="input-field">
                        </div>
                        <div class="form-group">
                            <label for="packetSizeUnit">Unit</label>
                            <select id="packetSizeUnit" class="input-field">
                                <option value="bytes">Bytes</option>
                                <option value="kb">KB</option>
                                <option value="mb">MB</option>
                                <option value="gb">GB</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Network Conditions -->
                <div class="section">
                    <h3 class="section-title">Network Conditions</h3>
                    
                    <div class="form-group">
                        <label for="lossRate">Loss Rate (%)</label>
                        <input type="number" id="lossRate" min="0" max="100" value="0" class="input-field" step="0.1">
                    </div>

                    <div class="form-group">
                        <label for="delay">Delay (ms)</label>
                        <input type="number" id="delay" min="0" max="5000" value="100" class="input-field">
                    </div>

                    <div class="form-group">
                        <label for="corruptionRate">Corruption Rate (%)</label>
                        <input type="number" id="corruptionRate" min="0" max="100" value="0" class="input-field" step="0.1">
                    </div>

                    <div class="form-group">
                        <label for="timeout">Timeout (ms)</label>
                        <input type="number" id="timeout" min="100" max="10000" value="2000" class="input-field">
                    </div>

                    <div class="form-group">
                        <label for="jitter">Jitter (ms)</label>
                        <input type="number" id="jitter" min="0" max="1000" value="0" class="input-field">
                    </div>

                    <div class="form-group">
                        <label for="bandwidth">Bandwidth (Mbps)</label>
                        <input type="number" id="bandwidth" min="0.1" max="1000" value="10" class="input-field" step="0.1">
                    </div>
                </div>

                <!-- Auto-Send Configuration -->
                <div class="section">
                    <h3 class="section-title">Auto-Send Mode</h3>
                    
                    <div class="form-group">
                        <label for="packetLimit">Packet Limit (0 = unlimited)</label>
                        <input type="number" id="packetLimit" min="0" max="100" value="5" class="input-field">
                    </div>

                    <div class="form-group">
                        <label for="autoSendInterval">Interval (ms)</label>
                        <input type="number" id="autoSendInterval" min="100" max="10000" value="1000" class="input-field">
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="section button-group">
                    <button id="sendBtn" class="btn btn-primary" onclick="sendPacket()">
                        ‚ñ∂ Send Packet
                    </button>
                    <button id="autoSendBtn" class="btn btn-secondary" onclick="toggleAutoSend()">
                        ‚è± Auto Send
                    </button>
                    <button id="resetBtn" class="btn btn-danger" onclick="resetSimulation()">
                        ‚Üª Reset
                    </button>
                </div>
            </div>

            <!-- CENTER PANEL - VISUALIZATION -->
            <div class="panel diagram-panel">
                <h2 class="panel-title">Packet Transmission Diagram</h2>
                
                <div class="diagram-container">
                    <div class="diagram-sender">
                        <div class="node-label">Sender</div>
                        <div id="senderState" class="node-state">Ready</div>
                    </div>

                    <svg id="packetSvg" class="diagram-svg" viewBox="0 0 500 150" preserveAspectRatio="xMidYMid meet">
                        <!-- Network diagram will be drawn here -->
                        <line x1="0" y1="75" x2="500" y2="75" stroke="#888" stroke-width="2" stroke-dasharray="5,5"/>
                        <text x="250" y="40" text-anchor="middle" fill="#888" font-size="12">UDP Network</text>
                    </svg>

                    <div class="diagram-receiver">
                        <div class="node-label">Receiver</div>
                        <div id="receiverState" class="node-state">Waiting</div>
                    </div>
                </div>

                <div class="network-status">
                    <strong>Status:</strong> <span id="networkStatus">Idle</span>
                </div>
            </div>

            <!-- RIGHT PANEL - STATISTICS & DETAILS -->
            <div class="panel stats-panel">
                <h2 class="panel-title">Live Statistics</h2>

                <!-- Packet Details -->
                <div class="section">
                    <h3 class="section-title">Current Packet</h3>
                    <div class="info-row">
                        <span class="label">Source Port:</span>
                        <span id="info-srcport" class="value">‚Äî</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Dest Port:</span>
                        <span id="info-dstport" class="value">‚Äî</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Sequence #:</span>
                        <span id="info-seq" class="value">‚Äî</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Length:</span>
                        <span id="info-length" class="value">‚Äî</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Checksum:</span>
                        <span id="info-checksum" class="value">‚Äî</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Status:</span>
                        <span id="info-status" class="value">‚Äî</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Size:</span>
                        <span id="info-size" class="value">‚Äî</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Data:</span>
                        <span id="info-data" class="value">‚Äî</span>
                    </div>
                </div>

                <!-- Transfer Statistics -->
                <div class="section">
                    <h3 class="section-title">Transfer Statistics</h3>
                    <div class="stat-box">
                        <div class="stat-item">
                            <div class="stat-label">Packets Sent</div>
                            <div id="packetsSent" class="stat-value">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">ACKs Received</div>
                            <div id="acksReceived" class="stat-value">0</div>
                        </div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-item">
                            <div class="stat-label">Retransmissions</div>
                            <div id="retransmissions" class="stat-value">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Packet Loss</div>
                            <div id="packetLoss" class="stat-value">0</div>
                        </div>
                    </div>
                </div>

                <!-- Event Log -->
                <div class="section">
                    <h3 class="section-title">Event Log</h3>
                    <div id="eventLog" class="event-log">
                        <div class="log-entry log-info">Ready to send packets</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="Packet.js"></script>
    <script src="Pipe.js"></script>
    <script src="script.js"></script>
</body>
</html>
